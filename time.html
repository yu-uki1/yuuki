<!doctype html>

<html lang="de">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width,initial-scale=1">
  <title>Binäruhr — Edle Yuuki</title>
  <style>
    :root{
      --bg:#0b0f14;
      --panel:#0f1720;
      --muted:#6b7280;
      --led-off:rgba(255,255,255,0.06);
      --led-on:#8b5cf6; /* lila */
      --gap:10px;
      font-family: Inter, ui-sans-serif, system-ui, -apple-system, "Segoe UI", Roboto, "Helvetica Neue", Arial;
    }
    html,body{height:100%;margin:0;background:linear-gradient(180deg,var(--bg),#071018);color:#e6eef8}
    .wrap{max-width:920px;margin:32px auto;padding:24px;background:linear-gradient(180deg,rgba(255,255,255,0.02),transparent);border-radius:12px;box-shadow:0 6px 30px rgba(2,6,23,0.7)}
    h1{margin:0 0 18px;font-size:20px;font-weight:600}
    p.lead{margin:0 0 18px;color:var(--muted)}
    .row{display:flex;align-items:center;gap:16px;padding:10px 6px;border-radius:10px}
    .label{width:120px;flex:0 0 120px;font-size:14px;color:var(--muted)}
    .bits{display:flex;gap:8px;align-items:center}
    .bit{width:18px;height:28px;border-radius:6px;background:var(--led-off);box-shadow:inset 0 -3px 6px rgba(0,0,0,0.6);display:flex;align-items:center;justify-content:center;font-size:10px;color:transparent}
    .bit.on{background:linear-gradient(180deg,var(--led-on),#5b21b6);box-shadow:0 6px 18px rgba(139,92,246,0.18), inset 0 -3px 6px rgba(0,0,0,0.6)}
    .bit.ms{height:18px;width:10px;border-radius:4px}
    .controls{display:flex;gap:8px;margin-top:14px;align-items:center}
    .btn{background:transparent;border:1px solid rgba(255,255,255,0.06);color:var(--muted);padding:6px 10px;border-radius:8px;cursor:pointer}
    .btn:active{transform:translateY(1px)}
    @media (max-width:700px){.label{width:96px;font-size:13px}.bit{width:14px;height:24px}}
  </style>
</head>
<body>
  <div class="wrap" role="main">
    <h1>Binäruhr — Edle Yuuki</h1>
    <p class="lead">Holde Uhr in binärer Tracht, angezeigt in Zeilen von oben nach unten: Jahr, Monat, Tag, Stunde, Minute, Sekunde, Millisekunde.</p><div id="clock"></div>

<div class="controls">
  <button id="toggleLabels" class="btn">Beschriftungen umkehren</button>
  <button id="toggleStyle" class="btn">Stil wechseln</button>
  <div style="flex:1"></div>
  <div class="small note" style="color:var(--muted);font-size:13px">Öffnen Sie diese Datei auf eurer magischen Tafel.</div>
</div>

  </div>  <script>
    // Bit-Längen (fixiert für kompatible Anzeige)
    const layout = [
      {key:'Jahr', bits:14},      // bis 16383 (mehr als genug)
      {key:'Monat', bits:4},      // 1-12 => 4 bit
      {key:'Tag', bits:5},        // 1-31 => 5 bit
      {key:'Stunde', bits:5},     // 0-23 => 5 bit
      {key:'Minute', bits:6},     // 0-59 => 6 bit
      {key:'Sekunde', bits:6},    // 0-59 => 6 bit
      {key:'Millisek.', bits:10}  // 0-999 => 10 bit
    ];

    // Erzeuge die DOM-Struktur
    const clock = document.getElementById('clock');
    layout.forEach(sec => {
      const row = document.createElement('div'); row.className='row';
      const label = document.createElement('div'); label.className='label'; label.textContent=sec.key;
      const bits = document.createElement('div'); bits.className='bits'; bits.dataset.bits = sec.bits;
      for(let i=0;i<sec.bits;i++){
        const b = document.createElement('div'); b.className='bit';
        // Speicherung der Position (MSB links)
        b.dataset.pos = sec.bits - 1 - i; // highest bit left
        bits.appendChild(b);
      }
      row.appendChild(label); row.appendChild(bits);
      clock.appendChild(row);
    });

    // Hilfsfunktionen
    function numberToBits(n, bits){
      const arr = new Array(bits).fill(0);
      for(let i=0;i<bits;i++){
        arr[i] = (n>>i)&1;
      }
      return arr; // little-endian (bit0 = LSB)
    }

    function update(){
      const now = new Date();
      const year = now.getFullYear();
      const month = now.getMonth()+1; // 1-12
      const day = now.getDate();
      const hour = now.getHours();
      const minute = now.getMinutes();
      const second = now.getSeconds();
      const ms = now.getMilliseconds();

      const values = [year, month, day, hour, minute, second, ms];

      // Aktualisiere jede Zeile
      const rows = clock.querySelectorAll('.bits');
      rows.forEach((bitsDiv, idx)=>{
        const bitsCount = Number(bitsDiv.dataset.bits);
        const val = values[idx];
        const bits = numberToBits(val, bitsCount); // little-endian
        // Setze Klassen: wir zeigen MSB ganz links -> pos dataset was gesetzt
        bitsDiv.querySelectorAll('.bit').forEach(bEl=>{
          const pos = Number(bEl.dataset.pos);
          const bitVal = bits[pos] || 0;
          if(bitVal) bEl.classList.add('on'); else bEl.classList.remove('on');
        });
      });
    }

    // Start-Intervall. Für flüssige Millisekunden mindestens 50ms.
    let rafId = null;
    function tick(){ update(); rafId = requestAnimationFrame(tick); }
    tick();

    // Buttons
    const toggleLabels = document.getElementById('toggleLabels');
    toggleLabels.addEventListener('click', ()=>{
      // Tausche Label & Bits (Beschriftungen rechts/links)
      document.querySelectorAll('.row').forEach(r=>{
        r.style.flexDirection = (r.style.flexDirection==='row-reverse')? 'row' : 'row-reverse';
      });
    });

    const toggleStyle = document.getElementById('toggleStyle');
    toggleStyle.addEventListener('click', ()=>{
      const root = document.documentElement;
      // Simple Stil-wechsel: lila <-> grün
      if(getComputedStyle(root).getPropertyValue('--led-on').trim() === '#8b5cf6'){
        root.style.setProperty('--led-on','#10b981');
      } else {
        root.style.setProperty('--led-on','#8b5cf6');
      }
    });

    // Sauber beenden bei Tab-Verlust
    window.addEventListener('visibilitychange', ()=>{
      if(document.hidden) cancelAnimationFrame(rafId); else tick();
    });

    // Hinweise: wenn Ihr diese Datei speichert als "binaer-uhr.html" und in eurem Browser (oder auf der magischen Tafel) öffnet,
    // so wisset, dass die Anzeige fortlaufend aktualisiert wird.
  </script></body>
</html>
